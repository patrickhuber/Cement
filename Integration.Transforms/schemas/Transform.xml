<?xml version="1.0" encoding="utf-8" ?>
<!-- Simple example we will map a person object
Person
  FirstName
  LastName
  DateOfBirth
  AddressList
    Address
      AddressLine1
      AddressLine2
      City
      State
      ZipCode 
  PhoneNumberList
    PhoneNumber
      AreaCode
      Prefix
      LineNumber
      
PersonDto
  FirstName
  LastName
  FullName 
  Age
  DateOfBirth  
  
 -->
<Transform xmlns="clr-namespace:Integration.Transforms">
  <!-- Define the input model as a simple hierarchy -->
  <Inputs>
    <Model Type="clr-namespace:Integration.Sample.Person">
      <Node Id="{AE18D9DC-3A32-496D-B399-12E79435DE2B}"
            Name="FirstName"/>
      <Node Id="{A6805DAA-5342-488C-A6DD-82BE4DF18DAE}"
            Name="LastName"/>
      <Node Id="{B287C4D2-E013-413A-9560-AF0A4093F657}"
            Name="DateOfBirth"/>
      <Node Id="{D5927EE9-4FBD-4650-BD61-DAFB72E4D1E8}"
            Name="AddressList">
        <Node Id="{CC39C575-651C-42B0-8277-13B195237688}"
              Name="Address">
          <Node Id="{CEAB44D6-96FA-4051-A2C0-8E3FC2AB8BD7}"
                Name="AddressLine1"/>
          <Node Id="{EE1F719C-944C-410D-AC9A-3061A8137388}"
                Name="AddressLine2"/>
          <Node Id="{F56A13C5-9E0E-43AF-912D-EF5EE4E382B8}"
                Name="City"/>
          <Node Id="{B67F90B7-3AFF-43CF-AE8F-4D3C9FF44007}"
                Name="State"/>
          <Node Id="{11B21837-859C-4A2D-939B-56D1C1CC6CF7}"
                Name="ZipCode"/>
        </Node>
      </Node>
      <Node Id="{F423D1C6-2F53-4E05-9EEB-44ADDEF69C31}" 
            Name="PhoneNumberList">
        <Node Id="{1B61773C-06FF-47E8-B3FF-FC940D4994DA}" 
              Name="PhoneNumber">
          <Node Id="{EC2AF756-DF32-4563-BB71-74DEC1924CF5}" 
                Name="AreaCode"/>
          <Node Id="{385E4BFA-5CA1-4D34-AEEA-E3BFB7BCA4F3}" 
                Name="Prefix"/>
          <Node Id="{4C559FE9-D195-4832-BB7D-5152F6FF177C}" 
                Name="LineNumber"/>
        </Node>
      </Node>
    </Model>
  </Inputs>
  <Outputs>
    <Model Type="clr-namespace:Integration.Sample.PersonDto">
      <Node Id="{460914C7-ABA2-4973-A93D-62E42518D0C2}"
            Name="FirstName"/>
      <Node Id="{06D470B8-FA22-4326-8026-CBB28EDAEC02}"
            Name="LastName"/>
      <Node Id="{8FEBC635-C5C1-492D-9593-102B3F5226D6}"
            Name="FullName"/>
      <Node Id="{A196D27A-03B0-45A5-ADFF-6C4AA22A87E0}"
            Name="Age"/>
      <Node Id="{685019FE-4F7B-449F-8CBB-CC7233444B6D}"
            Name="DateOfBirth"/>
    </Model>
  </Outputs>
  <Functions>
    <!-- Compute Nodes -->
    <Function Id="{6C508C28-8207-4BE6-A604-E2619F41E97C}"
              Name="GetAge"
              ReturnType="System.Int32"
              Language="C#">
      <Parameters>
        <Parameter Name="dateOfBirth" Type="System.DateTime" Direction="In"/>
      </Parameters>
      <Body>
        <![CDATA[
      System.DateTime today = System.DateTime.Today;
      int age = today.Year - bday.Year;
      if (bday > today.AddYears(-age)) 
        age--;
      return age;
      ]]>
      </Body>
    </Function>
  </Functions>
  <Operations>
    <Assign Id="{13B1EE77-FE66-4E86-A4AB-45A066E1F4C9}"            
            Value=", ">
      <Output Id="{4F48992B-F10E-4FAC-A8EB-684367CE9C26}"/>
    </Assign>
    <Concat Id="{AEA4B42C-944E-4758-B0CB-ED91201A2B4A}">
      <Inputs>
        <Input Id="{0F976110-EC9C-47F7-BBCD-A9DBC63087BF}"/>
        <Input Id="{43786164-C134-44D7-8D77-9B6F0264F021}"/>
        <Input Id="{757EE13F-60CB-42C5-A1B8-50CCF35A6A07}"/>
      </Inputs>
      <Output Id="{0C107CCE-3D56-4129-8A1B-D70FB44AC701}"/>
    </Concat>
    <CallFunction Id="{E377150B-8CC7-49D4-8554-BB9212833485}"
                  FunctionId="{6C508C28-8207-4BE6-A604-E2619F41E97C}">      
      <Inputs>
        <Input Id="{8906D429-3DE9-4155-A922-CEFC2F36F916}"/>
      </Inputs>
      <Output Id="{1FBED49B-891E-42AD-A69F-53CDBD73EC74}" />
    </CallFunction>
  </Operations>
  <Links>
    <!-- First Name-->
    <Link Source="{AE18D9DC-3A32-496D-B399-12E79435DE2B}" Target="{460914C7-ABA2-4973-A93D-62E42518D0C2}"/>
    <!-- Last Name-->
    <Link Source="{A6805DAA-5342-488C-A6DD-82BE4DF18DAE}" Target="{06D470B8-FA22-4326-8026-CBB28EDAEC02}"/>
    <!-- Full Name-->
    <Link Source="{AE18D9DC-3A32-496D-B399-12E79435DE2B}" Target="{0F976110-EC9C-47F7-BBCD-A9DBC63087BF}"/>
    <Link Source="{A6805DAA-5342-488C-A6DD-82BE4DF18DAE}" Target="{43786164-C134-44D7-8D77-9B6F0264F021}"/>
    <Link Source="{4F48992B-F10E-4FAC-A8EB-684367CE9C26}" Target="{757EE13F-60CB-42C5-A1B8-50CCF35A6A07}"/>
    <Link Source="{0C107CCE-3D56-4129-8A1B-D70FB44AC701}" Target="{8FEBC635-C5C1-492D-9593-102B3F5226D6}"/>
    <!-- DOB to Age -->
    <Link Source="{B287C4D2-E013-413A-9560-AF0A4093F657}" Target="{8906D429-3DE9-4155-A922-CEFC2F36F916}"/>
    <Link Source="{1FBED49B-891E-42AD-A69F-53CDBD73EC74}" Target="{A196D27A-03B0-45A5-ADFF-6C4AA22A87E0}"/>
    <!-- DOB to DOB -->
    <Link Source="{B287C4D2-E013-413A-9560-AF0A4093F657}" Target="{685019FE-4F7B-449F-8CBB-CC7233444B6D}"/>
  </Links>
</Transform>