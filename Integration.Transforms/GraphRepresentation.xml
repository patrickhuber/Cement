<?xml version="1.0" encoding="utf-8" ?>
<!-- Simple example we will map a person object
Person
  FirstName
  LastName
  DateOfBirth
  AddressList
    Address
      AddressLine1
      AddressLine2
      City
      State
      ZipCode 
  PhoneNumberList
    PhoneNumber
      AreaCode
      Prefix
      LineNumber
      
PersonDto
  FirstName
  LastName
  FullName 
  Age
  DateOfBirth  
  
 -->
<transform>
  <!-- Define the input model as a simple hierarchy -->
  <inputs>
    <model type="clr-namespace:Integration.Sample.Person">
      <node id="{AE18D9DC-3A32-496D-B399-12E79435DE2B}"
            name="FirstName"/>
      <node id="{A6805DAA-5342-488C-A6DD-82BE4DF18DAE}"
            name="LastName"/>
      <node id="{B287C4D2-E013-413A-9560-AF0A4093F657}"
            name="DateOfBirth"/>
      <node id="{D5927EE9-4FBD-4650-BD61-DAFB72E4D1E8}"
            name="AddressList">
        <node id="{CC39C575-651C-42B0-8277-13B195237688}"
              name="Address">
          <node id="{CEAB44D6-96FA-4051-A2C0-8E3FC2AB8BD7}"
                name="AddressLine1"/>
          <node id="{EE1F719C-944C-410D-AC9A-3061A8137388}"
                name="AddressLine2"/>
          <node id="{F56A13C5-9E0E-43AF-912D-EF5EE4E382B8}"
                name="City"/>
          <node id="{B67F90B7-3AFF-43CF-AE8F-4D3C9FF44007}"
                name="State"/>
          <node id="{11B21837-859C-4A2D-939B-56D1C1CC6CF7}"
                name="ZipCode"/>
        </node>
      </node>
      <node id="{F423D1C6-2F53-4E05-9EEB-44ADDEF69C31}" 
            name="PhoneNumberList">
        <node id="{1B61773C-06FF-47E8-B3FF-FC940D4994DA}" 
              name="PhoneNumber">
          <node id="{EC2AF756-DF32-4563-BB71-74DEC1924CF5}" 
                name="AreaCode"/>
          <node id="{385E4BFA-5CA1-4D34-AEEA-E3BFB7BCA4F3}" 
                name="Prefix"/>
          <node id="{4C559FE9-D195-4832-BB7D-5152F6FF177C}" 
                name="LineNumber"/>
        </node>
      </node>
    </model>
  </inputs>
  <outputs>
    <model type="clr-namespace:Integration.Sample.PersonDto">
      <node id="{460914C7-ABA2-4973-A93D-62E42518D0C2}"
            name="FirstName"/>
      <node id="{06D470B8-FA22-4326-8026-CBB28EDAEC02}"
            name="LastName"/>
      <node id="{8FEBC635-C5C1-492D-9593-102B3F5226D6}"
            name="FullName"/>
      <node id="{A196D27A-03B0-45A5-ADFF-6C4AA22A87E0}"
            name="Age"/>
      <node id="{685019FE-4F7B-449F-8CBB-CC7233444B6D}"
            name="DateOfBirth"/>
    </model>
  </outputs>
  <functions>
    <!-- Compute Nodes -->
    <function id="{6C508C28-8207-4BE6-A604-E2619F41E97C}"
              name="GetAge"
              returns="System.Int32"
              language="C#">
      <parameters>
        <parameter name="dateOfBirth" type="System.DateTime" direction="in"/>
      </parameters>
      <body>
        <![CDATA[
      System.DateTime today = System.DateTime.Today;
      int age = today.Year - bday.Year;
      if (bday > today.AddYears(-age)) 
        age--;
      return age;
      ]]>
      </body>
    </function>
  </functions>
  <objects>
    <assign id="{13B1EE77-FE66-4E86-A4AB-45A066E1F4C9}"
            output="{4F48992B-F10E-4FAC-A8EB-684367CE9C26}"
            value=", "/>
    <concat id="{AEA4B42C-944E-4758-B0CB-ED91201A2B4A}"
            output="{0C107CCE-3D56-4129-8A1B-D70FB44AC701}">
      <inputs>
        <in id="{0F976110-EC9C-47F7-BBCD-A9DBC63087BF}"/>
        <in id="{43786164-C134-44D7-8D77-9B6F0264F021}"/>
        <in id="{757EE13F-60CB-42C5-A1B8-50CCF35A6A07}"/>
      </inputs>
    </concat>
    <callFunction id="{E377150B-8CC7-49D4-8554-BB9212833485}"
                  functionId="{6C508C28-8207-4BE6-A604-E2619F41E97C}"
                  output="{1FBED49B-891E-42AD-A69F-53CDBD73EC74}">      
      <inputs>
        <in id="{8906D429-3DE9-4155-A922-CEFC2F36F916}"/>
      </inputs>
    </callFunction>
  </objects>
  <links>
    <!-- First Name-->
    <link from="{AE18D9DC-3A32-496D-B399-12E79435DE2B}" to="{460914C7-ABA2-4973-A93D-62E42518D0C2}"/>
    <!-- Last Name-->
    <link from="{A6805DAA-5342-488C-A6DD-82BE4DF18DAE}" to="{06D470B8-FA22-4326-8026-CBB28EDAEC02}"/>
    <!-- Full Name-->
    <link from="{AE18D9DC-3A32-496D-B399-12E79435DE2B}" to="{0F976110-EC9C-47F7-BBCD-A9DBC63087BF}"/>
    <link from="{A6805DAA-5342-488C-A6DD-82BE4DF18DAE}" to="{43786164-C134-44D7-8D77-9B6F0264F021}"/>
    <link from="{4F48992B-F10E-4FAC-A8EB-684367CE9C26}" to="{757EE13F-60CB-42C5-A1B8-50CCF35A6A07}"/>
    <link from="{0C107CCE-3D56-4129-8A1B-D70FB44AC701}" to="{8FEBC635-C5C1-492D-9593-102B3F5226D6}"/>
    <!-- DOB to Age -->
    <link from="{B287C4D2-E013-413A-9560-AF0A4093F657}" to="{8906D429-3DE9-4155-A922-CEFC2F36F916}"/>
    <link from="{1FBED49B-891E-42AD-A69F-53CDBD73EC74}" to="{A196D27A-03B0-45A5-ADFF-6C4AA22A87E0}"/>
    <!-- DOB to DOB -->
    <link from="{B287C4D2-E013-413A-9560-AF0A4093F657}" to="{685019FE-4F7B-449F-8CBB-CC7233444B6D}"/>
  </links>
</transform>